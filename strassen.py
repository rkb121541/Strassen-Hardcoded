def strassen2x2(a, b):
    m1 = (a[0][0] + a[1][1]) * (b[0][0] + b[1][1])
    m2 = (a[1][0] + a[1][1]) * b[0][0]
    m3 = a[0][0] * (b[0][1] - b[1][1])
    m4 = a[1][1] * (b[1][0] - b[0][0])
    m5 = (a[0][0] + a[0][1]) * b[1][1]
    m6 = (a[1][0] - a[0][0]) * (b[0][0] + b[0][1])
    m7 = (a[0][1] - a [1][1]) * (b[1][0] + b[1][1])
    c = [[0] * 2 for i in range(2)]
    c[0][0] = m1 + m4 - m5 + m7
    c[0][1] = m3 + m5
    c[1][0] = m2 + m4
    c[1][1] = m1 - m2 + m3 + m6
    return c

def strassen3x3(a, b):
    m1 = (a[0][0] + a[0][1] + a[0][2] - a[1][0] - a[1][1] - a[2][1] - a[2][2]) * b[1][1]
    m2 = (a[0][0] - a[1][0]) * (-b[0][1] + b[1][1])
    m3 = a[1][1] * (-b[0][0] + b[0][1] + b[1][0] - b[1][1] - b [1][2] - b[2][0] + b[2][2])
    m4 = (-a[0][0] + a[1][0] + a[1][1]) * (b[0][0] - b[0][1] + b[1][1])
    m5 = (a[1][0] + a[1][1]) * (-b[0][0] + b[0][1])
    m6 = a[0][0] * b[0][0]
    m7 = (-a[0][0] + a[2][0] + a[2][1]) * (b[0][0] - b[0][2] + b[1][2])
    m8 = (-a[0][0] + a[2][0]) * (b[0][2] - b[1][2])
    m9 = (a[2][0] + a[2][1]) * (-b[0][0] + b[0][2])
    m10 = (a[0][0] + a[0][1] + a[0][2] - a[1][1] - a[1][2] - a[2][0] - a[2][1]) * b[1][2]
    m11 = a[2][1] * (-b[0][0] + b[0][2] + b[1][0] - b[1][1] - b[1][2] - b[2][0] + b[2][1])
    m12 = (-a[0][2] + a[2][1] + a[2][2]) * (b[1][1] + b[2][0] - b[2][1])
    m13 = (a[0][2] - a[2][2]) * (b[1][1] - b[2][1])
    m14 = a[0][2] * b[2][0]
    m15 = (a[2][1] + a[2][2]) * (-b[2][0] + b[2][1])
    m16 = (-a[0][2] + a[1][1] + a[1][2]) * (b[1][2] + b[2][0] - b[2][2])
    m17 = (a[0][2] - a[1][2]) * (b[1][2] - b[2][2])
    m18 = (a[1][1] + a[1][2]) * (-b[2][0] + b[2][2])
    m19 = a[0][1] * b[1][0]
    m20 = a[1][2] * b[2][1]
    m21 = a[1][0] * b[0][2]
    m22 = a[2][0] * b[0][1]
    m23 = a[2][2] * b[2][2]
    c = [[0] * 3 for i in range(3)]
    c[0][0] = m6 + m14 + m19
    c[0][1] = m1 + m4 + m5 + m6 + m12 + m14 + m15
    c[0][2] = m6 + m7 + m9 + m10 + m14 + m16 + m18
    c[1][0] = m2 + m3 + m4 + m6 + m14 + m16 + m17
    c[1][1] = m2 + m4 + m5 + m6 + m20
    c[1][2] = m14 + m16 + m17 + m18 + m21
    c[2][0] = m6 + m7 + m8 + m11 + m12 + m13 + m14
    c[2][1] = m12 + m13 + m14 + m15 + m22
    c[2][2] = m6 + m7 + m8 + m9 + m23
    return c

def main():
    a = [[7, 5], [6, 3]]
    b = [[2, 1], [5, 1]]
    print(strassen2x2(a,b))
    e = [[1,2,-1],[3,2,0],[-4,0,2]]
    f = [[3,4,2],[0,1,0],[-2,0,1]]
    print(strassen3x3(e,f))

if __name__ == "__main__":
    main()